## 템플릿과 콜백

UserDao와 StatementStrategy, JdbcContext를 이용해 만든 코드는 전략 패턴이 적용된 것이라고 볼 수 있다. 바뀌지 않는 일정한 패턴을 갖는 작업 흐름이 존재하고 그중 일부분만 바꿔서 사용해야 하는 경우에 적합한 구조다. 

> 템플릿/콜백 패턴이란?

**템플릿**은 전략 패턴의 컨텍스트로 고정된 틀 안에 바꿀수 있는 부분을 넣어 사용하는 경우를 말한다. **콜백**은 실행되는 것을 목적으로 다른 오브젝트의 메소드에 전달되는 오브젝트를 말한다.

### 템플릿/콜백의 동작 원리

전략 패턴의 전략과 달리 템플릿/콜백 패턴의 콜백은 보통 단일 메소드 인터페이스를 사용한다. 템플릿의 작업 흐름 중 특정 기능을 위해 한 번 호출되는 경우가 일반적이기 때문이다. 콜백은 일반적으로 하나의 메소드를 가진 인터페이스를 구현한 익명 내부 클래스로 만들어진다. 콜백 인터페이스의 메소드에는 파라미터가 있는데, 템플릿의 작업 흐름 중에 만들어지는 컨텍스트 정보를 전달받을 때 사용된다.

![img](https://github.com/dilmah0203/TIL/blob/main/Image/Template_Callback.png)

- 클라이언트는 템플릿 안에서 실행될 로직을 담은 콜백 오브젝트를 만들고 템플릿 메소드를 호출할 때 파라미터로 전달된다.

- 템플릿은 정해진 작업 흐름을 따라 진행하다가 내부에서 생성한 참조정보를 가지고 콜백 오브젝트의 메소드를 호출한다. 콜백은 참조정보를 이용해서 작업 수행 후 결과를 템플릿에 돌려준다.

- 템플릿은 콜백이 돌려준 정보를 사용하여 작업을 마저 수행한다.